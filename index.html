<!DOCTYPE html>
<html lang="en-US">

<style>

html, body {
	overflow: hidden;
    margin: 0px;
    padding: 0px;
	background-color: #262D3B;
}

.yday{
  display: inline-block;
  flex-flow: row wrap;
  justify-content: center;
  align-items: center;
  vertical-align: center;
  background-color: #262D3B;
  padding: 0px;
  margin:  0px;
  height: 49%;
  width: 49%;
  position: fixed;
  bottom: 4vh;
  

}
.podium{
  display: inline-block;
  flex-flow: row wrap;
  justify-content: center;
  align-items: center;
  vertical-align: center;
  background-color: #262D3B;
  padding: 0px;
  margin:  0px;
  
  width: 49%;
  position: fixed;
  top: 10vh;

}
.full-height {
  display: inline-block;
  flex-flow: row wrap;
  justify-content: center;
  align-items: center;
  vertical-align: center;
  background-color: #262D3B;
  padding: 0px;
  margin:  0px;
  height: 100%;
  width: 49%;
  padding-left: 20px;
  }
  
#titleblock {
  
  background-color: blue;
  text-align: center;
  padding: 16px;
  
  }
  
#span1 {

  margin: 10px;
  padding-top: 20px;
  margin-left: 40px;

}

.topBarGen {

	
	height: 12px;
	display: inline-block;
	margin-top: 10px;
	text-align: center;
	font-family: Roboto;
	font-size: 64%;
	vertical-align: middle;
	padding: 4px;
	color: #262D3B;
	
}

.topBar1{

   width: 4%
   

}

.topBar2 {

	width: 6.4%;
	
	
}


</style>
<head>
        <title>Live Feed of Top 25 Steppers</title>
        <meta http-equiv="refresh" content="100" />
    </head>

<body>

<!--<h1 id="titleblock" class = "hstyle" >Step Challenge Live Feed</h1> -->
<span id="span1">
	<div class="topBarGen topBar1" style="background-color: #262D3B; color: white; width: 9%">Time Since Last Sync:</div>
	<div class="topBarGen topBar1" style="background-color: #33cc33">0 - 10 m</div>
	<div class="topBarGen topBar1" style="background-color: #59cc33">10 - 15 m</div>
	<div class="topBarGen topBar1" style="background-color: #80cc33">15 - 30 m</div>
	<div class="topBarGen topBar1" style="background-color: #A6cc33">30 - 45 m</div>
	<div class="topBarGen topBar1" style="background-color: #cccc33">45 - 60 m</div>
	<div class="topBarGen topBar1" style="background-color: #cca633">60 - 90 m</div>
	<div class="topBarGen topBar1" style="background-color: #cc8033">1.5 - 3 hrs</div>
	<div class="topBarGen topBar1" style="background-color: #cc5933">3 - 6 hrs</div>
	<div class="topBarGen topBar1" style="background-color: #cc3333">6+ hrs</div>
	<div class="topBarGen topBar1" style="background-color:#262D3B;color: white; width: 6.4%">No. of Steps:</div>
	<div class="topBarGen topBar2" style="background-color: #cd7f32">Bronze</div>
	<div class="topBarGen topBar2" style="background-color: #C0C0C0">Silver</div>
	<div class="topBarGen topBar2" style="background-color: #D4AF37">Gold</div>


	
	
</span>
<div style="padding-top: 0px; background-color:#262D3B;" >
<div id="chart_div" class="full-height"></div>
<div id="yesterday_chart" class="yday"></div>
<div id="podium_chart" class="podium"></div>
</div>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script type="text/javascript">

google.charts.load('current', {packages: ['corechart', 'bar']});
google.charts.setOnLoadCallback(drawMultSeries);

function drawMultSeries() {
      var data = google.visualization.arrayToDataTable([['name','steps'],['marone',41724],['nigel',31575],['TomH',22325],['Wakely',19637],['jhjWheatcroft',15919],['emilia_d',14650],['NickDalgaard',12558],['Mingster',12350],['CB2020',12064],['ahob',11983],['Sewage',11427],['JeremyWebb',10781],['loco',9893],['PQUINN',9371],['SallyGraham',9367],['GaryPD',9282],['MarcusCheng',8980],['MBott',8951],['cconway',8935],['sarahlroberts',8565],['andystepstone',8408],['StephanieSparks',8319],['MattHat',8186],['Pippa',8063],['mdarch',7764]]);
	  var yday = google.visualization.arrayToDataTable([['name', 'steps'], ['marone', 57922], ['Wakely', 40385], ['Sewage', 34032], ['AVO', 29159], ['Pippa', 28938], ['The Proclaimer', 28545], ['Flying Squirrel', 27985], ['stephenljones', 27707], ['Paul O', 27152], ['IHE', 26629], ['MBott', 23847], ['nigel', 23418], ['SallyGraham', 22473], ['JezDavey', 22322], ['delvo', 22026]]);
	  var sync = google.visualization.arrayToDataTable([['name','steps'],['marone',30.0],['nigel',30.0],['TomH',30.0],['Wakely',10.0],['jhjWheatcroft',10.0],['emilia_d',128.0],['NickDalgaard',35.0],['Mingster',85.0],['CB2020',15.0],['ahob',5.0],['Sewage',5.0],['JeremyWebb',95.0],['loco',10.0],['PQUINN',128.0],['SallyGraham',50.0],['GaryPD',5.0],['MarcusCheng',10.0],['MBott',15.0],['cconway',50.0],['sarahlroberts',128.0],['andystepstone',128.0],['StephanieSparks',45.0],['MattHat',10.0],['Pippa',35.0],['mdarch',128.0]]);
	  var podm = google.visualization.arrayToDataTable([['name','steps', {role: 'style'}],['Wakely',25531,'#C0C0C0'],['EdNelson', 29697,'#D4AF37'],['stephenljones',22925,'#cd7f32']]);
	  
	  
		var ranges = [
    [6000, 10000, '#cd7f32'],    // bronze
    [10000, 15000, '#C0C0C0'],   // silver
    [15000, 20000, '#D4AF37'],   // gold
    [20000, null, '#e5e4e2']  // platinum
		];
		
		var ranges1 = [
    [0, 10, '#33cc33'],    // Bright Green
    [10, 15, '#59cc33'],  
	[15, 30, '#80cc33'], 
	[30, 45, '#a6cc33'], 
	[45, 60, '#cccc33'], 
	[60, 90, '#cca633'], 
	[90, 180, '#cc8033'], 
    [180, 360, '#cc5933'],   
    [360, null, '#cc3333']  // red
		];
		
		var view = new google.visualization.DataView(data);
  view.setColumns([0, 1, {
    calc: function (dt, row) {
      var rowValue = sync.getValue(row, 1);
      var color;
      ranges1.forEach(function (range, index) {
        if ((rowValue >= range[0]) && ((rowValue < range[1]) || (range[1] === null))) {
          color = range[2];
        }
      });
      return color;
    },
    role: 'style',
    type: 'string'
  }]);
  
  var view2 = new google.visualization.DataView(yday);
  view2.setColumns([0, 1, {
    calc: function (dt, row) {
      var rowValue2 = dt.getValue(row, 1);
      var color2;
      ranges.forEach(function (range, index) {
        if ((rowValue2 >= range[0]) && ((rowValue2 < range[1]) || (range[1] === null))) {
          color2 = range[2];
        }
      });
      return color2;
    },
    role: 'style',
    type: 'string'
  }]);
  
  var view3 = new google.visualization.DataView(podm);
  view3.setColumns([0, 1, {
    calc: function (dt, row) {
      var rowValue2 = dt.getValue(row, 1);
      var color2;
      ranges.forEach(function (range, index) {
        if ((rowValue2 >= range[0]) && ((rowValue2 < range[1]) || (range[1] === null))) {
          color2 = range[2];
        }
      });
      return color2;
    },
    role: 'style',
    type: 'string'
  }]);

	  var today = new Date();
	  var minutes = (Math.floor(parseInt(today.getMinutes())/5)*5+1)
	  if (minutes < 10) { minutes = '0' + minutes;}
	  var time = today.getHours()+':'+ minutes;
	  var date = today.getDate() + '-' + (today.getMonth()+1) + '-' + today.getFullYear();
	  var dateTime = 'Last Refreshed: '+date + ' ' + time;
  
      var options = {
        title: 'Live Feed of Top 25 Steppers',
		titleTextStyle: {
        color: '#F4F2EC',    // any HTML string color ('red', '#cc00cc')
        fontName: 'Roboto', // i.e. 'Times New Roman'
        fontSize: 32, // 12, 18 whatever you want (don't specify px)
        bold: true,    // true or false
        italic: false   // true of false
		},
		//series: [{color: 'white', visibleInLegend: true}, {color: 'red', visibleInLegend: true}],
		color: '#ffffff',
		textStyle: {color: '#ffffff'},
		backgroundColor: '#262D3B',
		subtitle: 'Top 25 Steppers',
        width: '600', 
		height: '700',
		'chartArea': {'width': '70%', 'height': '65%'},
		is3d: true,
        hAxis: {
          title: dateTime,
		  titleTextStyle: { color: '#F4F2EC',    // any HTML string color ('red', '#cc00cc')
				fontName: 'Roboto' // i.e. 'Times New Roman'
				},
          minValue: 0,
		  textStyle: {color: '#F4F2EC', font: 'Roboto'}
        },
        vAxis: {
          title: '',
		  titleTextStyle: { color: '#F4F2EC',    // any HTML string color ('red', '#cc00cc')
				fontName: 'Roboto' // i.e. 'Times New Roman'
				},
		  textStyle: {color: '#F4F2EC', font: 'Roboto'}
        },
		legend: 'none'
      };
	  
	  var optionsYday = {
        title: 'Yesterdays Top 15 Steppers',
		titleTextStyle: {
        color: '#F4F2EC',    // any HTML string color ('red', '#cc00cc')
        fontName: 'Roboto', // i.e. 'Times New Roman'
        fontSize: 32, // 12, 18 whatever you want (don't specify px)
        bold: true,    // true or false
        italic: false   // true of false
		},
		//series: [{color: 'white', visibleInLegend: true}, {color: 'red', visibleInLegend: true}],
		color: '#ffffff',
		textStyle: {color: '#ffffff'},
		backgroundColor: '#262D3B',
		subtitle: 'Top 25 Steppers',
        width: '600', 
		height: '350',
		'chartArea': {'width': '70%', 'height': '65%'},
		is3d: true,
        hAxis: {
          title: '[Refreshes every morning at 9:30]',
		  titleTextStyle: { color: '#F4F2EC',    // any HTML string color ('red', '#cc00cc')
				fontName: 'Roboto' // i.e. 'Times New Roman'
				},
          minValue: 0,
		  textStyle: {color: '#F4F2EC', font: 'Roboto'}
        },
        vAxis: {
          title: '',
		  titleTextStyle: { color: '#F4F2EC',    // any HTML string color ('red', '#cc00cc')
				fontName: 'Roboto' // i.e. 'Times New Roman'
				},
		  textStyle: {color: '#F4F2EC', font: 'Roboto'}
        },
		legend: 'none'
      };
	  
	  var optionsPodm = {
        title: 'Overall Podium: Average Steps',
		titleTextStyle: {
        color: '#F4F2EC',    // any HTML string color ('red', '#cc00cc')
        fontName: 'Roboto', // i.e. 'Times New Roman'
        fontSize: 32, // 12, 18 whatever you want (don't specify px)
        bold: true,    // true or false
        italic: false   // true of false
		},
		//series: [{color: 'white', visibleInLegend: true}, {color: 'red', visibleInLegend: true}],
		color: '#ffffff',
		textStyle: {color: '#ffffff'},
		backgroundColor: '#262D3B',
		subtitle: 'Top 25 Steppers',
        width: '600', 
		height: '250',
		'chartArea': {'width': '70%', 'height': '65%'},
		is3d: true,
        hAxis: {
          title: '',
		  titleTextStyle: { color: '#A2A2A2',    // any HTML string color ('red', '#cc00cc')
				fontName: 'Roboto' // i.e. 'Times New Roman'
				},
          minValue: 0,
		  textStyle: {color: '#F4F2EC', font: 'Roboto'}
        },
        vAxis: {
          title: '',
		  titleTextStyle: { color: '#F4F2EC',    // any HTML string color ('red', '#cc00cc')
				fontName: 'Roboto' // i.e. 'Times New Roman'
				},
		  textStyle: {color: 'transparent', font: 'Roboto'},
		  gridlines: { color: 'transparent' },
		  scaleType: 'log'
        },
		legend: 'none'
      };
	  
	  
      var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
      chart.draw(view, options);
	  
	  var chart = new google.visualization.BarChart(document.getElementById('yesterday_chart'));
      chart.draw(view2, optionsYday);
	  
	  var chart = new google.visualization.ColumnChart(document.getElementById('podium_chart'));
      chart.draw(podm, optionsPodm);
    }
	
	
</script>

</body>
</html>  
