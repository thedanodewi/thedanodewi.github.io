<!DOCTYPE html>
<html lang="en-US">

<style>

html, body {
	overflow: hidden;
    margin: 0px;
    padding: 0px;
	background-color: #262D3B;
}

.half_width{
  display: inline-block;
  flex-flow: row wrap;
  justify-content: center;
  align-items: center;
  vertical-align: center;
  background-color: #262D3B;
  padding: 0px;
  margin:  0px;
  height: 100%;
  width: 49%;

}
.full-height {
  display: inline-block;
  flex-flow: row wrap;
  justify-content: center;
  align-items: center;
  vertical-align: center;
  background-color: #262D3B;
  padding: 0px;
  margin:  0px;
  height: 100%;
  width: 49%;
  padding-left: 20px;
  }
  
#titleblock {
  
  background-color: blue;
  text-align: center;
  padding: 16px;
  
  }
  
#span1 {

  margin: 10px;
  padding-top: 20px;
  margin-left: 40px;

}

.topBarGen {

	
	height: 12px;
	display: inline-block;
	margin-top: 10px;
	text-align: center;
	font-family: Roboto;
	font-size: 64%;
	vertical-align: middle;
	padding: 4px;
	color: #262D3B;
	
}

.topBar1{

   width: 4%
   

}

.topBar2 {

	width: 6.4%;
	
	
}


</style>
<head>
        <title>Live Feed of Top 25 Steppers</title>
        <meta http-equiv="refresh" content="100" />
    </head>

<body>

<!--<h1 id="titleblock" class = "hstyle" >Step Challenge Live Feed</h1> -->
<span id="span1">
	<div class="topBarGen topBar1" style="background-color: #262D3B; color: white; width: 9%">Time Since Last Sync:</div>
	<div class="topBarGen topBar1" style="background-color: #33cc33">0 - 10 m</div>
	<div class="topBarGen topBar1" style="background-color: #59cc33">10 - 15 m</div>
	<div class="topBarGen topBar1" style="background-color: #80cc33">15 - 30 m</div>
	<div class="topBarGen topBar1" style="background-color: #A6cc33">30 - 45 m</div>
	<div class="topBarGen topBar1" style="background-color: #cccc33">45 - 60 m</div>
	<div class="topBarGen topBar1" style="background-color: #cca633">60 - 90 m</div>
	<div class="topBarGen topBar1" style="background-color: #cc8033">1.5 - 3 hrs</div>
	<div class="topBarGen topBar1" style="background-color: #cc5933">3 - 6 hrs</div>
	<div class="topBarGen topBar1" style="background-color: #cc3333">6+ hrs</div>
	<div class="topBarGen topBar1" style="background-color:#262D3B;color: white; width: 6.4%">No. of Steps:</div>
	<div class="topBarGen topBar2" style="background-color: #cd7f32">6k - 15k</div>
	<div class="topBarGen topBar2" style="background-color: #C0C0C0">15k-20k</div>
	<div class="topBarGen topBar2" style="background-color: #D4AF37">20k - 25k</div>
	<div class="topBarGen topBar2" style="background-color: #e5e4e2">25k +</div>

	
	
</span>
<div style="padding-top: 0px; background-color:#262D3B;" >
<div id="chart_div" class="full-height"></div>
<div id="yesterday_chart" class="half_width"></div>
</div>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

<script type="text/javascript">

google.charts.load('current', {packages: ['corechart', 'bar']});
google.charts.setOnLoadCallback(drawMultSeries);

function drawMultSeries() {
      var data = google.visualization.arrayToDataTable([['name','steps'],['Mingster',14585],['Stepasaurus',13959],['nigel',12790],['Celine',12552],['CB2020',11980],['MattF',11406],['SallyGraham',11274],['Wakely',11039],['Majic',10543],['StephanieSparks',10109],['ClaireH',9993],['Georgie',9984],['PaulHinz',9421],['Sewage',9030],['Dijesh',9011],['cconway',8961],['ahob',8899],['AndreiS',8841],['PhilK',8447],['Whitey',8364],['JoHarry',8148],['rajg',7913],['Rukhsar',7804],['MattWilliams',7781],['AndyK',7130]]);
	  var yday = google.visualization.arrayToDataTable([['name', 'steps'], ['Wakely', 32691], ['Mingster', 29252], ['emmaharvey', 29075], ['Neil Leppard', 28429], ['Sewage', 27103], ['Matt F', 26678], ['Ben_Sayer', 26135], ['JezDavey', 25084], ['MBott', 24960], ['sarahlroberts', 24725]]);
	  var sync = google.visualization.arrayToDataTable([['name','steps'],['Mingster',80.0],['Stepasaurus',15.0],['nigel',110.0],['Celine',5.0],['CB2020',30.0],['MattF',80.0],['SallyGraham',20.0],['Wakely',25.0],['Majic',60.0],['StephanieSparks',142.0],['ClaireH',55.0],['Georgie',55.0],['PaulHinz',5.0],['Sewage',10.0],['Dijesh',142.0],['cconway',142.0],['ahob',15.0],['AndreiS',120.0],['PhilK',15.0],['Whitey',142.0],['JoHarry',80.0],['rajg',10.0],['Rukhsar',129.0],['MattWilliams',15.0],['AndyK',85.0]]);
	  
		var ranges = [
    [6000, 15000, '#cd7f32'],    // bronze
    [15000, 20000, '#C0C0C0'],   // silver
    [20000, 25000, '#D4AF37'],   // gold
    [25000, null, '#e5e4e2']  // platinum
		];
		
		var ranges1 = [
    [0, 10, '#33cc33'],    // Bright Green
    [10, 15, '#59cc33'],  
	[15, 30, '#80cc33'], 
	[30, 45, '#a6cc33'], 
	[45, 60, '#cccc33'], 
	[60, 90, '#cca633'], 
	[90, 180, '#cc8033'], 
    [180, 360, '#cc5933'],   
    [360, null, '#cc3333']  // red
		];
		
		var view = new google.visualization.DataView(data);
  view.setColumns([0, 1, {
    calc: function (dt, row) {
      var rowValue = sync.getValue(row, 1);
      var color;
      ranges1.forEach(function (range, index) {
        if ((rowValue >= range[0]) && ((rowValue < range[1]) || (range[1] === null))) {
          color = range[2];
        }
      });
      return color;
    },
    role: 'style',
    type: 'string'
  }]);
  
  var view2 = new google.visualization.DataView(yday);
  view2.setColumns([0, 1, {
    calc: function (dt, row) {
      var rowValue2 = dt.getValue(row, 1);
      var color2;
      ranges.forEach(function (range, index) {
        if ((rowValue2 >= range[0]) && ((rowValue2 < range[1]) || (range[1] === null))) {
          color2 = range[2];
        }
      });
      return color2;
    },
    role: 'style',
    type: 'string'
  }]);

	  var today = new Date();
	  var minutes = (Math.floor(parseInt(today.getMinutes())/5)*5+1)
	  if (minutes < 10) { minutes = '0' + minutes;}
	  var time = today.getHours()+':'+ minutes;
	  var date = today.getDate() + '-' + (today.getMonth()+1) + '-' + today.getFullYear();
	  var dateTime = 'Last Refreshed: '+date + ' ' + time;
  
      var options = {
        title: 'Live Feed of Top 25 Steppers',
		titleTextStyle: {
        color: '#F4F2EC',    // any HTML string color ('red', '#cc00cc')
        fontName: 'Roboto', // i.e. 'Times New Roman'
        fontSize: 32, // 12, 18 whatever you want (don't specify px)
        bold: true,    // true or false
        italic: false   // true of false
		},
		//series: [{color: 'white', visibleInLegend: true}, {color: 'red', visibleInLegend: true}],
		color: '#ffffff',
		textStyle: {color: '#ffffff'},
		backgroundColor: '#262D3B',
		subtitle: 'Top 25 Steppers',
        width: '650', 
		height: '700',
		'chartArea': {'width': '70%', 'height': '65%'},
		is3d: true,
        hAxis: {
          title: dateTime,
		  titleTextStyle: { color: '#F4F2EC',    // any HTML string color ('red', '#cc00cc')
				fontName: 'Roboto' // i.e. 'Times New Roman'
				},
          minValue: 0,
		  textStyle: {color: '#F4F2EC', font: 'Roboto'}
        },
        vAxis: {
          title: '',
		  titleTextStyle: { color: '#F4F2EC',    // any HTML string color ('red', '#cc00cc')
				fontName: 'Roboto' // i.e. 'Times New Roman'
				},
		  textStyle: {color: '#F4F2EC', font: 'Roboto'}
        },
		legend: 'none'
      };
	  
	  var optionsYday = {
        title: 'Yesterdays Top 10 Steppers',
		titleTextStyle: {
        color: '#F4F2EC',    // any HTML string color ('red', '#cc00cc')
        fontName: 'Roboto', // i.e. 'Times New Roman'
        fontSize: 32, // 12, 18 whatever you want (don't specify px)
        bold: true,    // true or false
        italic: false   // true of false
		},
		//series: [{color: 'white', visibleInLegend: true}, {color: 'red', visibleInLegend: true}],
		color: '#ffffff',
		textStyle: {color: '#ffffff'},
		backgroundColor: '#262D3B',
		subtitle: 'Top 25 Steppers',
        width: '650', 
		height: '700',
		'chartArea': {'width': '70%', 'height': '65%'},
		is3d: true,
        hAxis: {
          title: '[Refreshes every morning at 9:30]',
		  titleTextStyle: { color: '#F4F2EC',    // any HTML string color ('red', '#cc00cc')
				fontName: 'Roboto' // i.e. 'Times New Roman'
				},
          minValue: 0,
		  textStyle: {color: '#F4F2EC', font: 'Roboto'}
        },
        vAxis: {
          title: '',
		  titleTextStyle: { color: '#F4F2EC',    // any HTML string color ('red', '#cc00cc')
				fontName: 'Roboto' // i.e. 'Times New Roman'
				},
		  textStyle: {color: '#F4F2EC', font: 'Roboto'}
        },
		legend: 'none'
      };

      var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
      chart.draw(view, options);
	  
	  var chart = new google.visualization.BarChart(document.getElementById('yesterday_chart'));
      chart.draw(view2, optionsYday);
    }
	
	
</script>

</body>
</html>  
